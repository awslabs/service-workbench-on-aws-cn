"use strict";(self.webpackChunkservice_workbench_docusaurus=self.webpackChunkservice_workbench_docusaurus||[]).push([[5145],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return k}});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=s(n),k=i,u=m["".concat(p,".").concat(k)]||m[k]||d[k]||r;return n?a.createElement(u,o(o({ref:t},c),{},{components:n})):a.createElement(u,o({ref:t},c))}));function k(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=m;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var s=2;s<r;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},3919:function(e,t,n){function a(e){return!0===/^(\w*:|\/\/)/.test(e)}function i(e){return void 0!==e&&!a(e)}n.d(t,{b:function(){return a},Z:function(){return i}})},4996:function(e,t,n){n.d(t,{C:function(){return r},Z:function(){return o}});var a=n(2263),i=n(3919);function r(){var e=(0,a.Z)().siteConfig,t=(e=void 0===e?{}:e).baseUrl,n=void 0===t?"/":t,r=e.url;return{withBaseUrl:function(e,t){return function(e,t,n,a){var r=void 0===a?{}:a,o=r.forcePrependBaseUrl,l=void 0!==o&&o,p=r.absolute,s=void 0!==p&&p;if(!n)return n;if(n.startsWith("#"))return n;if((0,i.b)(n))return n;if(l)return t+n;var c=n.startsWith(t)?n:t+n.replace(/^\//,"");return s?e+c:c}(r,n,e,t)}}}function o(e,t){return void 0===t&&(t={}),(0,r().withBaseUrl)(e,t)}},3149:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return p},metadata:function(){return s},toc:function(){return c},default:function(){return m}});var a=n(7462),i=n(3366),r=(n(7294),n(3905)),o=(n(4996),["components"]),l={id:"oidc-providers",title:"OIDC Providers Settings",sidebar_label:"OIDC Providers Settings"},p=void 0,s={unversionedId:"installation_guide/installation/pre-installation/oidc-providers",id:"installation_guide/installation/pre-installation/oidc-providers",isDocsHomePage:!1,title:"OIDC Providers Settings",description:"This section is for creating OIDC IdP client and creating Service Workbench root user in OIDC IdP.",source:"@site/docs/installation_guide/installation/pre-installation/oidc-providers.md",sourceDirName:"installation_guide/installation/pre-installation",slug:"/installation_guide/installation/pre-installation/oidc-providers",permalink:"/service-workbench-on-aws-cn/installation_guide/installation/pre-installation/oidc-providers",editUrl:"https://github.com/awslabs/go-research-on-aws/website/docs/installation_guide/installation/pre-installation/oidc-providers.md",tags:[],version:"current",frontMatter:{id:"oidc-providers",title:"OIDC Providers Settings",sidebar_label:"OIDC Providers Settings"},sidebar:"serviceWorkbenchSidebar",previous:{title:"Tool requirements",permalink:"/service-workbench-on-aws-cn/installation_guide/installation/pre-installation/tool-req"},next:{title:"China Regions Prerequisites",permalink:"/service-workbench-on-aws-cn/installation_guide/installation/pre-installation/china-prerequisites"}},c=[{value:"Creating OIDC IdP Client and User",id:"creating-oidc-idp-client-and-user",children:[{value:"Authing",id:"authing",children:[{value:"Creating Authing.cn OIDC client",id:"creating-authingcn-oidc-client",children:[],level:4},{value:"Creating user in Authing.cn",id:"creating-user-in-authingcn",children:[],level:4}],level:3},{value:"Keycloak on AWS",id:"keycloak-on-aws",children:[{value:"Creating Keycloak OIDC client",id:"creating-keycloak-oidc-client",children:[],level:4},{value:"Creating user in Keycloak",id:"creating-user-in-keycloak",children:[],level:4}],level:3},{value:"Okta",id:"okta",children:[{value:"Creating Okta OIDC client",id:"creating-okta-oidc-client",children:[],level:4},{value:"Creating user in Okta",id:"creating-user-in-okta",children:[],level:4}],level:3}],level:2}],d={toc:c};function m(e){var t=e.components,l=(0,i.Z)(e,o);return(0,r.kt)("wrapper",(0,a.Z)({},d,l,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"This section is for creating OIDC IdP client and creating Service Workbench root user in OIDC IdP."),(0,r.kt)("h2",{id:"creating-oidc-idp-client-and-user"},"Creating OIDC IdP Client and User"),(0,r.kt)("p",null,"OpenID Connect (OIDC) IdP is an alternative of ",(0,r.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-user-identity-pools.html"},"Cognito User Pool")," for authentication of Service Workbench. Before deploying Service Workbench with OIDC IdP, you have to create your OIDC provider in external OIDC services."),(0,r.kt)("p",null,"Below are example procedures for creating OIDC providers in Authing, Keycloak and Okta for reference. You can use other OIDC providers as well."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"(Authing Option) ",(0,r.kt)("a",{parentName:"li",href:"https://www.authing.cn/"},"Authing")," is an example of a third-party authentication provider. "),(0,r.kt)("li",{parentName:"ul"},"(Keycloak on AWS Option) ",(0,r.kt)("a",{parentName:"li",href:"https://www.amazonaws.cn/en/solutions/keycloak-on-aws/"},"Keycloak on AWS")," is a solution maintained by AWS and can serve as an authentication identity provider."),(0,r.kt)("li",{parentName:"ul"},"(Okta Option) ",(0,r.kt)("a",{parentName:"li",href:"https://www.okta.com/sg/"},"Okta")," is one trusted platform to secure every identity, from customers to your workforce.")),(0,r.kt)("p",null,"Follow the steps below to create an OIDC client and , and obtain the ",(0,r.kt)("inlineCode",{parentName:"p"},"client_id"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"issuer"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"user_name"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"first_name")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"last_name")),(0,r.kt)("h3",{id:"authing"},"Authing"),(0,r.kt)("h4",{id:"creating-authingcn-oidc-client"},"Creating Authing.cn OIDC client"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Go to the ",(0,r.kt)("a",{parentName:"p",href:"https://console.authing.cn/console"},"Authing console"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Create a user pool if you don't have one.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Select the user pool.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"On the left navigation bar, select ",(0,r.kt)("strong",{parentName:"p"},"Self-built App")," under ",(0,r.kt)("strong",{parentName:"p"},"Applications"),". ")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Click the ",(0,r.kt)("strong",{parentName:"p"},"Create")," button.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Enter the ",(0,r.kt)("strong",{parentName:"p"},"Application Name"),", and ",(0,r.kt)("strong",{parentName:"p"},"Subdomain"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Save the ",(0,r.kt)("inlineCode",{parentName:"p"},"App ID")," (that is, ",(0,r.kt)("inlineCode",{parentName:"p"},"client_id"),") and ",(0,r.kt)("inlineCode",{parentName:"p"},"Issuer")," to a text file from Endpoint Information, which will be used later.\n",(0,r.kt)("a",{target:"_blank",href:n(182).Z},(0,r.kt)("img",{src:n(6062).Z})))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Update the ",(0,r.kt)("inlineCode",{parentName:"p"},"Login Callback URL")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Logout Callback URL")," to your ICP recorded domain name.\nFor example: suppose our Service Workbench domain is ",(0,r.kt)("inlineCode",{parentName:"p"},"www.swb-example.com"),", please input ",(0,r.kt)("inlineCode",{parentName:"p"},"https://www.swb-example.com/")," for both ",(0,r.kt)("inlineCode",{parentName:"p"},"Login Callback URL")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Logout Callback URL"),"."),(0,r.kt)("div",{parentName:"li",className:"admonition admonition-tip alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},'Please make sure that the URL you fill in ends with "/"'))),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{target:"_blank",href:n(7659).Z},(0,r.kt)("img",{src:n(6682).Z}))),(0,r.kt)("p",{parentName:"li"},"If we don't use custom domain for Service Workbench, the Service Workbench provide cloudfront domain to access. So we need to config deployed Service Workbench cloudfront domain to ",(0,r.kt)("inlineCode",{parentName:"p"},"Login Callback URL")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Logout Callback URL"),", before deploying Service Workbench, we can keep ",(0,r.kt)("inlineCode",{parentName:"p"},"Login Callback URL")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Logout Callback URL")," as ",(0,r.kt)("inlineCode",{parentName:"p"},"*"),". After Service Workbench is deployed, we need to get cloudfront domain and enter it into ",(0,r.kt)("inlineCode",{parentName:"p"},"Login Callback URL")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Logout Callback URL")," again."),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Get cloudfront domain\n",(0,r.kt)("strong",{parentName:"li"},"CloudFormation"),", ",(0,r.kt)("strong",{parentName:"li"},"Stacks"),", ",(0,r.kt)("strong",{parentName:"li"},"xxx-infrastructure"),", ",(0,r.kt)("strong",{parentName:"li"},"Outputs"),", ",(0,r.kt)("strong",{parentName:"li"},"WebsiteUrl"),", like below:\n",(0,r.kt)("a",{target:"_blank",href:n(9157).Z},(0,r.kt)("img",{src:n(2585).Z})))))),(0,r.kt)("ol",{start:9},(0,r.kt)("li",{parentName:"ol"},"Set the Authorization Configuration.\n",(0,r.kt)("a",{target:"_blank",href:n(9033).Z},(0,r.kt)("img",{src:n(4343).Z})))),(0,r.kt)("p",null,"You have successfully created an authing self-built application.\nFor more information, please visit ",(0,r.kt)("a",{parentName:"p",href:"https://docs.authing.cn/v2/en/"},"authing doc")),(0,r.kt)("h4",{id:"creating-user-in-authingcn"},"Creating user in Authing.cn"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Login the ",(0,r.kt)("a",{parentName:"p",href:"https://console.authing.cn/console"},"Authing console"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Choose ",(0,r.kt)("strong",{parentName:"p"},"Users & Roles"),", ",(0,r.kt)("strong",{parentName:"p"},"Users"),", ",(0,r.kt)("strong",{parentName:"p"},"Create User")," and ",(0,r.kt)("strong",{parentName:"p"},"Email"),", input ",(0,r.kt)("inlineCode",{parentName:"p"},"Email")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Password"),", click ",(0,r.kt)("strong",{parentName:"p"},"Confirm")," to create user."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{target:"_blank",href:n(1202).Z},(0,r.kt)("img",{src:n(1706).Z})))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Edit ",(0,r.kt)("strong",{parentName:"p"},"Personal Info"),", confirm ",(0,r.kt)("inlineCode",{parentName:"p"},"Email"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"Given Name")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Family Name")," have been fulled."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{target:"_blank",href:n(404).Z},(0,r.kt)("img",{src:n(4669).Z}))),(0,r.kt)("div",{parentName:"li",className:"admonition admonition-tip alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"If there is no ",(0,r.kt)("inlineCode",{parentName:"p"},"Given Name")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"Family Name")," in ",(0,r.kt)("strong",{parentName:"p"},"Personal Info"),"\uff0cplease choose sidebar ",(0,r.kt)("strong",{parentName:"p"},"Setting"),"\uff0c",(0,r.kt)("strong",{parentName:"p"},"Field Management"),"\uff0cset ",(0,r.kt)("strong",{parentName:"p"},"Given Name")," and ",(0,r.kt)("strong",{parentName:"p"},"Family Name's")," ",(0,r.kt)("strong",{parentName:"p"},"Visible from Console")," as ",(0,r.kt)("strong",{parentName:"p"},"Yes"),"\uff0cand then edit ",(0,r.kt)("strong",{parentName:"p"},"Personal Info")," again."))))),(0,r.kt)("p",null,"You have successfully created an user in authing. "),(0,r.kt)("h3",{id:"keycloak-on-aws"},"Keycloak on AWS"),(0,r.kt)("h4",{id:"creating-keycloak-oidc-client"},"Creating Keycloak OIDC client"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Deploy the Keycloak solution in AWS China Regions following ",(0,r.kt)("a",{parentName:"p",href:"https://aws-samples.github.io/keycloak-on-aws/en/"},"this guide"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Make sure you can log in to the Keycloak console.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"On the left navigation bar, select ",(0,r.kt)("strong",{parentName:"p"},"Add realm"),". Skip this step if you already have a realm. ")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Go to the realm setting page. Choose ",(0,r.kt)("strong",{parentName:"p"},"Endpoints"),", and then ",(0,r.kt)("strong",{parentName:"p"},"OpenID Endpoint Configuration")," from the list."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{target:"_blank",href:n(2728).Z},(0,r.kt)("img",{src:n(9137).Z})))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"In the JSON file that opens up in your browser, record the ",(0,r.kt)("strong",{parentName:"p"},"issuer")," value which will be used later."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{target:"_blank",href:n(1038).Z},(0,r.kt)("img",{src:n(8502).Z})))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Go back to Keycloak console and select ",(0,r.kt)("strong",{parentName:"p"},"Clients")," on the left navigation bar, and choose ",(0,r.kt)("strong",{parentName:"p"},"Create"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Enter a Client ID, which must contain 24 letters (case-insensitive) or numbers. Record the ",(0,r.kt)("strong",{parentName:"p"},"Client ID")," which will be used later.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Change client settings. Update the ",(0,r.kt)("inlineCode",{parentName:"p"},"Valid Redirect URIs")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Web Origins")," to your ICP recorded domain name.\nFor example: suppose our Service Workbench domain is ",(0,r.kt)("inlineCode",{parentName:"p"},"www.swb-example.com"),", please input ",(0,r.kt)("inlineCode",{parentName:"p"},"https://www.swb-example.com/")," for both ",(0,r.kt)("inlineCode",{parentName:"p"},"Valid Redirect URIs")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Web Origins"),"."),(0,r.kt)("div",{parentName:"li",className:"admonition admonition-tip alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},'Please make sure that the URL you fill in ends with "/"'))),(0,r.kt)("p",{parentName:"li"}," ",(0,r.kt)("a",{target:"_blank",href:n(1525).Z},(0,r.kt)("img",{src:n(6845).Z}))),(0,r.kt)("p",{parentName:"li"},"If we don't use custom domain for Service Workbench, the Service Workbench provide cloudfront domain to access. So we need to config deployed Service Workbench cloudfront domain to ",(0,r.kt)("inlineCode",{parentName:"p"},"Valid Redirect URIs")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Web Origins"),", before deploying Service Workbench, we can keep ",(0,r.kt)("inlineCode",{parentName:"p"},"Valid Redirect URIs")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Web Origins")," as ",(0,r.kt)("inlineCode",{parentName:"p"},"*"),". After Service Workbench is deployed, we need to get cloudfront domain and enter it into ",(0,r.kt)("inlineCode",{parentName:"p"},"Valid Redirect URIs")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Web Origins")," again."),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Get cloudfront domain\n",(0,r.kt)("strong",{parentName:"li"},"CloudFormation"),", ",(0,r.kt)("strong",{parentName:"li"},"Stacks"),", ",(0,r.kt)("strong",{parentName:"li"},"xxx-infrastructure"),", ",(0,r.kt)("strong",{parentName:"li"},"Outputs"),", ",(0,r.kt)("strong",{parentName:"li"},"WebsiteUrl"),", like below:\n",(0,r.kt)("a",{target:"_blank",href:n(9157).Z},(0,r.kt)("img",{src:n(2585).Z})))))),(0,r.kt)("p",null,"The issuer value is ",(0,r.kt)("inlineCode",{parentName:"p"},"https://<KEYCLOAK_DOMAIN_NAME>/auth/realms/<REALM_NAME>"),". "),(0,r.kt)("h4",{id:"creating-user-in-keycloak"},"Creating user in Keycloak"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Login your deployed Keycloak Administration Console and choose the ",(0,r.kt)("strong",{parentName:"p"},"realm")," that you created before.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Choose ",(0,r.kt)("strong",{parentName:"p"},"User")," and ",(0,r.kt)("strong",{parentName:"p"},"Add user"),", input ",(0,r.kt)("inlineCode",{parentName:"p"},"Username"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"Email"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"First Name")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Last Name"),", then click ",(0,r.kt)("strong",{parentName:"p"},"Save")," to create user.\n",(0,r.kt)("a",{target:"_blank",href:n(3115).Z},(0,r.kt)("img",{src:n(8567).Z})))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"After user created, choose ",(0,r.kt)("strong",{parentName:"p"},"Credentials")," to set password.\n",(0,r.kt)("a",{target:"_blank",href:n(5825).Z},(0,r.kt)("img",{src:n(3677).Z}))))),(0,r.kt)("p",null,"You have successfully created an user in keycloak. "),(0,r.kt)("h3",{id:"okta"},"Okta"),(0,r.kt)("h4",{id:"creating-okta-oidc-client"},"Creating Okta OIDC client"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Go to the ",(0,r.kt)("a",{parentName:"p",href:"https://www.okta.com/"},"Okta console"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Create an account if you don't have one.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Access Admin console.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Create an application if you don't have one, choose ",(0,r.kt)("strong",{parentName:"p"},"Applications"),", ",(0,r.kt)("strong",{parentName:"p"},"Application"),", ",(0,r.kt)("strong",{parentName:"p"},"Create App Integration"),", ",(0,r.kt)("strong",{parentName:"p"},"Create App Integration"),", ",(0,r.kt)("strong",{parentName:"p"},"OIDC - OpenID Connect")," and ",(0,r.kt)("strong",{parentName:"p"},"Single-Page Application"),", click ",(0,r.kt)("strong",{parentName:"p"},"Next")," button. ")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Click the ",(0,r.kt)("strong",{parentName:"p"},"Create")," button.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Enter the ",(0,r.kt)("strong",{parentName:"p"},"App integration name"),", set ",(0,r.kt)("strong",{parentName:"p"},"Grant type")," as ",(0,r.kt)("strong",{parentName:"p"},"Authorization Code"),".\n",(0,r.kt)("a",{target:"_blank",href:n(8003).Z},(0,r.kt)("img",{src:n(8996).Z})))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Update the ",(0,r.kt)("inlineCode",{parentName:"p"},"Sign-in redirect URIs")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Sign-out redirect URIs")," to your ICP recorded domain name.\nFor example: suppose our Service Workbench domain is ",(0,r.kt)("inlineCode",{parentName:"p"},"www.swb-example.com"),", please input ",(0,r.kt)("inlineCode",{parentName:"p"},"https://www.swb-example.com/")," for both ",(0,r.kt)("inlineCode",{parentName:"p"},"Sign-in redirect URIs")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Sign-out redirect URIs"),"."),(0,r.kt)("div",{parentName:"li",className:"admonition admonition-tip alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},'Please make sure that the URL you fill in ends with "/"'))),(0,r.kt)("p",{parentName:"li"}," ",(0,r.kt)("a",{target:"_blank",href:n(2521).Z},(0,r.kt)("img",{src:n(7059).Z}))),(0,r.kt)("p",{parentName:"li"},"If we don't use custom domain for Service Workbench, the Service Workbench provide cloudfront domain to access. So we need to config deployed Service Workbench cloudfront domain to ",(0,r.kt)("inlineCode",{parentName:"p"},"Sign-in redirect URIs")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Sign-out redirect URIs"),", before deploying Service Workbench, we can keep ",(0,r.kt)("inlineCode",{parentName:"p"},"Sign-in redirect URIs")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Sign-out redirect URIs")," as ",(0,r.kt)("inlineCode",{parentName:"p"},"*"),". After Service Workbench is deployed, we need to get cloudfront domain and enter it into ",(0,r.kt)("inlineCode",{parentName:"p"},"Sign-in redirect URIs")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Sign-out redirect URIs")," again."),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Get cloudfront domain\n",(0,r.kt)("strong",{parentName:"li"},"CloudFormation"),", ",(0,r.kt)("strong",{parentName:"li"},"Stacks"),", ",(0,r.kt)("strong",{parentName:"li"},"xxx-infrastructure"),", ",(0,r.kt)("strong",{parentName:"li"},"Outputs"),", ",(0,r.kt)("strong",{parentName:"li"},"WebsiteUrl"),", like below:\n",(0,r.kt)("a",{target:"_blank",href:n(9157).Z},(0,r.kt)("img",{src:n(2585).Z}))))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"After creating application, you can get the ",(0,r.kt)("inlineCode",{parentName:"p"},"Client ID")," (that is ",(0,r.kt)("inlineCode",{parentName:"p"},"client_id")," text) and the ",(0,r.kt)("inlineCode",{parentName:"p"},"Issuer"),"(that is your Okta URL, for example: ",(0,r.kt)("inlineCode",{parentName:"p"},"https://xxx.okta.com"),"). Please save them which will be used later.\n",(0,r.kt)("a",{target:"_blank",href:n(9404).Z},(0,r.kt)("img",{src:n(8266).Z}))))),(0,r.kt)("h4",{id:"creating-user-in-okta"},"Creating user in Okta"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Login the ",(0,r.kt)("a",{parentName:"li",href:"https://www.okta.com/"},"Okta console")," Admin console."),(0,r.kt)("li",{parentName:"ol"},"Choose ",(0,r.kt)("strong",{parentName:"li"},"Directory"),", ",(0,r.kt)("strong",{parentName:"li"},"People")," and ",(0,r.kt)("strong",{parentName:"li"},"Add person"),", then input ",(0,r.kt)("inlineCode",{parentName:"li"},"First name"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"Last name"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"Username")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"Primary email"),", choose ",(0,r.kt)("inlineCode",{parentName:"li"},"I will set password")," to set password, then click ",(0,r.kt)("strong",{parentName:"li"},"Save"),".\n",(0,r.kt)("a",{target:"_blank",href:n(3115).Z},(0,r.kt)("img",{src:n(8567).Z})))),(0,r.kt)("p",null,"You have successfully created an user in Okta."))}m.isMDXComponent=!0},1038:function(e,t,n){t.Z=n.p+"assets/files/OIDC-config-c99d73ada1c66c0a1c35bc948f3fa07b.jpg"},7659:function(e,t,n){t.Z=n.p+"assets/files/authentication-configuration-861f430b250533423bf92b35b9933591.png"},1202:function(e,t,n){t.Z=n.p+"assets/files/authing-create-user-42ee8055fc6dcc39622dacbce13f49b5.png"},404:function(e,t,n){t.Z=n.p+"assets/files/authing-user-config-bc4db21c1bf13586477037aac58288c3.png"},9033:function(e,t,n){t.Z=n.p+"assets/files/authorization-configuration-76b08493cca8861bc11e50db6eeaf384.png"},182:function(e,t,n){t.Z=n.p+"assets/files/endpoint-info-e7ed55fcbd502c490c8ad7087bf41fb7.png"},9157:function(e,t,n){t.Z=n.p+"assets/files/get-cloudfront-domain-972b3eb749b34a459230eb3626b129b9.png"},1525:function(e,t,n){t.Z=n.p+"assets/files/keycloak-client-setting-a56de635ad4b870e49ccb867bc4af691.png"},2728:function(e,t,n){t.Z=n.p+"assets/files/keycloak-example-realm-f9263f2b2d98396583d1ec2b3372268e.jpg"},3115:function(e,t,n){t.Z=n.p+"assets/files/keycloak-user-create-94ebba1a1b92f4682fc75ac5e34fac21.png"},5825:function(e,t,n){t.Z=n.p+"assets/files/keycloak-user-password-00d09a5b098d41a2ca966786d5d62868.png"},8003:function(e,t,n){t.Z=n.p+"assets/files/okta-application-create-6b17d506b699be36f5820f73b3f69f12.png"},2521:function(e,t,n){t.Z=n.p+"assets/files/okta-application-url-29231e991dcfc3eaa286303a1a4e07ee.png"},9404:function(e,t,n){t.Z=n.p+"assets/files/okta-client-id-68507283cf40ec1ae1a4245f8adc49bf.png"},8502:function(e,t,n){t.Z=n.p+"assets/images/OIDC-config-c99d73ada1c66c0a1c35bc948f3fa07b.jpg"},6682:function(e,t,n){t.Z=n.p+"assets/images/authentication-configuration-861f430b250533423bf92b35b9933591.png"},1706:function(e,t,n){t.Z=n.p+"assets/images/authing-create-user-42ee8055fc6dcc39622dacbce13f49b5.png"},4669:function(e,t,n){t.Z=n.p+"assets/images/authing-user-config-bc4db21c1bf13586477037aac58288c3.png"},4343:function(e,t,n){t.Z=n.p+"assets/images/authorization-configuration-76b08493cca8861bc11e50db6eeaf384.png"},6062:function(e,t,n){t.Z=n.p+"assets/images/endpoint-info-e7ed55fcbd502c490c8ad7087bf41fb7.png"},2585:function(e,t,n){t.Z=n.p+"assets/images/get-cloudfront-domain-972b3eb749b34a459230eb3626b129b9.png"},6845:function(e,t,n){t.Z=n.p+"assets/images/keycloak-client-setting-a56de635ad4b870e49ccb867bc4af691.png"},9137:function(e,t,n){t.Z=n.p+"assets/images/keycloak-example-realm-f9263f2b2d98396583d1ec2b3372268e.jpg"},8567:function(e,t,n){t.Z=n.p+"assets/images/keycloak-user-create-94ebba1a1b92f4682fc75ac5e34fac21.png"},3677:function(e,t,n){t.Z=n.p+"assets/images/keycloak-user-password-00d09a5b098d41a2ca966786d5d62868.png"},8996:function(e,t,n){t.Z=n.p+"assets/images/okta-application-create-6b17d506b699be36f5820f73b3f69f12.png"},7059:function(e,t,n){t.Z=n.p+"assets/images/okta-application-url-29231e991dcfc3eaa286303a1a4e07ee.png"},8266:function(e,t,n){t.Z=n.p+"assets/images/okta-client-id-68507283cf40ec1ae1a4245f8adc49bf.png"}}]);