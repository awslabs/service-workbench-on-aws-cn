<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<title data-react-helmet="true">Create or add an AWS Account | Service Workbench Platform</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://your-docusaurus-test-site.com/service-workbench-on-aws-cn/deployment/post_deployment/link_aws_account"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Create or add an AWS Account | Service Workbench Platform"><meta data-react-helmet="true" name="description" content="There are two categories of AWS Account within Service Workbench: Internal accounts and External accounts."><meta data-react-helmet="true" property="og:description" content="There are two categories of AWS Account within Service Workbench: Internal accounts and External accounts."><link data-react-helmet="true" rel="shortcut icon" href="/service-workbench-on-aws-cn/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://your-docusaurus-test-site.com/service-workbench-on-aws-cn/deployment/post_deployment/link_aws_account"><link data-react-helmet="true" rel="alternate" href="https://your-docusaurus-test-site.com/service-workbench-on-aws-cn/deployment/post_deployment/link_aws_account" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://your-docusaurus-test-site.com/service-workbench-on-aws-cn/deployment/post_deployment/link_aws_account" hreflang="x-default"><link rel="stylesheet" href="/service-workbench-on-aws-cn/assets/css/styles.d97de6cb.css">
<link rel="preload" href="/service-workbench-on-aws-cn/assets/js/runtime~main.4cbe2071.js" as="script">
<link rel="preload" href="/service-workbench-on-aws-cn/assets/js/main.e8ff6809.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/service-workbench-on-aws-cn/"><b class="navbar__title">Home</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ğŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ğŸŒ</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><main class="docMainContainer_r8cw docMainContainerEnhanced_SOUu"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Create or add an AWS Account</h1></header><p>There are two categories of AWS Account within Service Workbench: <strong>Internal accounts</strong> and <strong>External accounts</strong>. </p><ul><li><strong>Internal accounts</strong>: Internal accounts are those linked to the AWS account from which you deployed Service Workbench. Users linked to an internal account will all be billed to that AWS account. </li><li><strong>External accounts</strong>: External accounts supply their own AWS account, and users linked to an external account are billed to the external AWS account. This is how external researchers can collaborate and share data within Service Workbench, but remain responsible for their own billing.</li></ul><p>After logging in to the Service Workbench web interface for the first time as <strong>root</strong> user, perform the following actions: </p><ol><li>From the sidebar, click â€˜<strong>Accounts</strong>â€™ to display the â€˜<strong>Accounts</strong>â€™ page. </li><li>On the â€˜<strong>Accounts</strong>â€™ page, create an <strong>AWS Account</strong> within Service Workbench.</li></ol><h2 class="anchor anchorWithStickyNavbar_y2LR" id="create-aws-organization">Create AWS Organization<a aria-hidden="true" class="hash-link" href="#create-aws-organization" title="Direct link to heading">â€‹</a></h2><p>In the AWS Management Console, create an AWS Organization in the <strong>Master</strong> account. There is no configuration to set; Service Workbench will create a new account in the AWS Organization for this deployment, named after the <strong>Stage Name</strong> used at deployment. If you already created an AWS Organization, there is no further action required.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="get-master-account-role-arn">Get Master Account Role ARN<a aria-hidden="true" class="hash-link" href="#get-master-account-role-arn" title="Direct link to heading">â€‹</a></h2><ol><li>Read the file:  <code>main/solution/prepare-master-acc/README.md</code>.</li><li>Change directory to the <strong>root folder</strong> and run the command below. This command will take about 8 minutes to execute. </li></ol><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">`scripts/master-account-deploy.sh &lt;stage&gt;` </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The output of this command is described in <strong>Figure 2</strong>.</p><img src="/service-workbench-on-aws-cn/img/deployment/post_deployment/service_information_00">**_Figure 2: Service Information_** 3. Copy the value of the **Master Role ARN** from the output of the previous step. This value is the ARN of the newly created **Master** role.<h3 class="anchor anchorWithStickyNavbar_y2LR" id="create-aws-account">Create AWS Account<a aria-hidden="true" class="hash-link" href="#create-aws-account" title="Direct link to heading">â€‹</a></h3><p>This will create an account whose billing will go to the <strong>Main</strong> account. The <strong>Main</strong> account is the account in which Service Workbench is deployed. See <strong>Figure 3</strong>.</p><img src="/service-workbench-on-aws-cn/img/deployment/post_deployment/create_account_00.jpg">**_Figure 3: Create AWS Account_**<p>To create the AWS Account, perform the following actions: </p><ol><li>In the Service Workbench console, navigate to â€˜<strong>Accounts &gt; AWS Accounts</strong>â€™ and click â€˜<strong>Create AWS Account</strong>â€™. </li><li>Specify the following details:
â€“	In â€˜<strong>Role ARN</strong>â€™, fill in the <strong>Master Role ARN</strong> copied from the previous step.
â€“	The <strong>email address</strong> that you specify here must be unique within the AWS Organization.
â€“	The <strong>External ID</strong> by default is the string workbench. See <a href="/service-workbench-on-aws-cn/deployment/reference/iam_role">IAM Role</a> for information on how to configure this to another value.</li></ol><p>After a minute, the following information displays in the â€˜<strong>AWS Accounts</strong>â€™ tab:
â€“	â€œ<em>Trying to create accountID: xxx</em>â€.
â€“	A workflow is in progress in â€˜<strong>Workflows &gt; Provision Account</strong>â€™ (see the sidebar&#x27;s â€˜Accountsâ€™ page.)</p><p><em><strong>Note</strong>: If instead you see an error message such as, â€œStop Internal State Account ID not foundâ€, check the AWS Organization in the console of your <strong>Master</strong> account. Your account must not belong to an existing AWS Organization. You must either have an existing AWS Organization or be able to create a new AWS Organization.</em></p><ol><li>Optionally, in the AWS console, you can inspect the following resources deployed by this script:
â€“	In AWS CloudFormation, a stack prep-master will be running. It creates the <strong>Master</strong> role and its output is the <strong>Master Role ARN</strong>.
â€“	In AWS Organization, the new account will display in the <strong>Master</strong> account
â€“	In AWS IAM, the new <strong>Master</strong> role will be created.
Once you add the account, it gets listed in â€˜<strong>AWS Accounts</strong>â€™ as shown in <strong>Figure 4</strong>.</li></ol><img src="/service-workbench-on-aws-cn/img/deployment/post_deployment/create_account_02.jpg">**_Figure 4: Example of an AWS Account_**<h2 class="anchor anchorWithStickyNavbar_y2LR" id="add-external-aws-account">Add External AWS Account<a aria-hidden="true" class="hash-link" href="#add-external-aws-account" title="Direct link to heading">â€‹</a></h2><p>This will create an account whose billing will go to an external AWS account, such as an external researcher.</p><ol><li>Deploy the file below. It will output Role ARN, VPC ID, etc.</li></ol><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">addons/addon-base-raas/packages/base-raas-cfn-templates/src/templates/onboard-account.cfn.yml</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ol start="2"><li>In the Service Workbench administrative interface, click the â€˜<strong>AWS Accounts</strong>â€™ tab of an administrator login. See <strong>Figure 5</strong>. </li><li>Click â€˜<strong>Add AWS Account</strong>â€™ and enter the account information.</li></ol><img src="/service-workbench-on-aws-cn/img/deployment/post_deployment/create_account_01.jpg">**_Figure 5: Add AWS Account_**</div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/awslabs/go-research-on-aws/website/docs/deployment/post_deployment/link_aws_account.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#create-aws-organization" class="table-of-contents__link toc-highlight">Create AWS Organization</a></li><li><a href="#get-master-account-role-arn" class="table-of-contents__link toc-highlight">Get Master Account Role ARN</a><ul><li><a href="#create-aws-account" class="table-of-contents__link toc-highlight">Create AWS Account</a></li></ul></li><li><a href="#add-external-aws-account" class="table-of-contents__link toc-highlight">Add External AWS Account</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/service-workbench-on-aws-cn/assets/js/runtime~main.4cbe2071.js"></script>
<script src="/service-workbench-on-aws-cn/assets/js/main.e8ff6809.js"></script>
</body>
</html>