<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-deployment/post_deployment/link_aws_account">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Create or add an AWS Account | Service Workbench Platform</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/service-workbench-on-aws-cn/deployment/post_deployment/link_aws_account"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Create or add an AWS Account | Service Workbench Platform"><meta data-rh="true" name="description" content="There are two categories of AWS Account within Service Workbench: Internal accounts and External accounts."><meta data-rh="true" property="og:description" content="There are two categories of AWS Account within Service Workbench: Internal accounts and External accounts."><link data-rh="true" rel="icon" href="/service-workbench-on-aws-cn/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/service-workbench-on-aws-cn/deployment/post_deployment/link_aws_account"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/service-workbench-on-aws-cn/deployment/post_deployment/link_aws_account" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/service-workbench-on-aws-cn/deployment/post_deployment/link_aws_account" hreflang="x-default"><link rel="stylesheet" href="/service-workbench-on-aws-cn/assets/css/styles.a41df327.css">
<link rel="preload" href="/service-workbench-on-aws-cn/assets/js/runtime~main.ce72e352.js" as="script">
<link rel="preload" href="/service-workbench-on-aws-cn/assets/js/main.ca450158.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/service-workbench-on-aws-cn/"><b class="navbar__title text--truncate">Home</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Create or add an AWS Account</h1></header><p>There are two categories of AWS Account within Service Workbench: <strong>Internal accounts</strong> and <strong>External accounts</strong>. </p><ul><li><strong>Internal accounts</strong>: Internal accounts are those linked to the AWS account from which you deployed Service Workbench. Users linked to an internal account will all be billed to that AWS account. </li><li><strong>External accounts</strong>: External accounts supply their own AWS account, and users linked to an external account are billed to the external AWS account. This is how external researchers can collaborate and share data within Service Workbench, but remain responsible for their own billing.</li></ul><p>After logging in to the Service Workbench web interface for the first time as <strong>root</strong> user, perform the following actions: </p><ol><li>From the sidebar, click ‘<strong>Accounts</strong>’ to display the ‘<strong>Accounts</strong>’ page. </li><li>On the ‘<strong>Accounts</strong>’ page, create an <strong>AWS Account</strong> within Service Workbench.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-aws-organization">Create AWS Organization<a class="hash-link" href="#create-aws-organization" title="Direct link to heading">​</a></h2><p>In the AWS Management Console, create an AWS Organization in the <strong>Master</strong> account. There is no configuration to set; Service Workbench will create a new account in the AWS Organization for this deployment, named after the <strong>Stage Name</strong> used at deployment. If you already created an AWS Organization, there is no further action required.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="get-master-account-role-arn">Get Master Account Role ARN<a class="hash-link" href="#get-master-account-role-arn" title="Direct link to heading">​</a></h2><ol><li>Read the file:  <code>main/solution/prepare-master-acc/README.md</code>.</li><li>Change directory to the <strong>root folder</strong> and run the command below. This command will take about 8 minutes to execute. </li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">`scripts/master-account-deploy.sh &lt;stage&gt;` </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The output of this command is described in <strong>Figure 2</strong>.</p><img loading="lazy" src="/service-workbench-on-aws-cn/img/deployment/post_deployment/service_information_00" class="img_ev3q">**_Figure 2: Service Information_** 3. Copy the value of the **Master Role ARN** from the output of the previous step. This value is the ARN of the newly created **Master** role.<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-aws-account">Create AWS Account<a class="hash-link" href="#create-aws-account" title="Direct link to heading">​</a></h3><p>This will create an account whose billing will go to the <strong>Main</strong> account. The <strong>Main</strong> account is the account in which Service Workbench is deployed. See <strong>Figure 3</strong>.</p><img loading="lazy" src="/service-workbench-on-aws-cn/img/deployment/post_deployment/create_account_00.jpg" class="img_ev3q">**_Figure 3: Create AWS Account_**<p>To create the AWS Account, perform the following actions: </p><ol><li>In the Service Workbench console, navigate to ‘<strong>Accounts &gt; AWS Accounts</strong>’ and click ‘<strong>Create AWS Account</strong>’. </li><li>Specify the following details:
–	In ‘<strong>Role ARN</strong>’, fill in the <strong>Master Role ARN</strong> copied from the previous step.
–	The <strong>email address</strong> that you specify here must be unique within the AWS Organization.
–	The <strong>External ID</strong> by default is the string workbench. See <a href="/service-workbench-on-aws-cn/deployment/reference/iam_role">IAM Role</a> for information on how to configure this to another value.</li></ol><p>After a minute, the following information displays in the ‘<strong>AWS Accounts</strong>’ tab:
–	“<em>Trying to create accountID: xxx</em>”.
–	A workflow is in progress in ‘<strong>Workflows &gt; Provision Account</strong>’ (see the sidebar&#x27;s ‘Accounts’ page.)</p><p><em><strong>Note</strong>: If instead you see an error message such as, “Stop Internal State Account ID not found”, check the AWS Organization in the console of your <strong>Master</strong> account. Your account must not belong to an existing AWS Organization. You must either have an existing AWS Organization or be able to create a new AWS Organization.</em></p><ol><li>Optionally, in the AWS console, you can inspect the following resources deployed by this script:
–	In AWS CloudFormation, a stack prep-master will be running. It creates the <strong>Master</strong> role and its output is the <strong>Master Role ARN</strong>.
–	In AWS Organization, the new account will display in the <strong>Master</strong> account
–	In AWS IAM, the new <strong>Master</strong> role will be created.
Once you add the account, it gets listed in ‘<strong>AWS Accounts</strong>’ as shown in <strong>Figure 4</strong>.</li></ol><img loading="lazy" src="/service-workbench-on-aws-cn/img/deployment/post_deployment/create_account_02.jpg" class="img_ev3q">**_Figure 4: Example of an AWS Account_**<h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-external-aws-account">Add External AWS Account<a class="hash-link" href="#add-external-aws-account" title="Direct link to heading">​</a></h2><p>This will create an account whose billing will go to an external AWS account, such as an external researcher.</p><ol><li>Deploy the file below. It will output Role ARN, VPC ID, etc.</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">addons/addon-base-raas/packages/base-raas-cfn-templates/src/templates/onboard-account.cfn.yml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>In the Service Workbench administrative interface, click the ‘<strong>AWS Accounts</strong>’ tab of an administrator login. See <strong>Figure 5</strong>. </li><li>Click ‘<strong>Add AWS Account</strong>’ and enter the account information.</li></ol><img loading="lazy" src="/service-workbench-on-aws-cn/img/deployment/post_deployment/create_account_01.jpg" class="img_ev3q">**_Figure 5: Add AWS Account_**</div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/awslabs/go-research-on-aws/website/docs/deployment/post_deployment/link_aws_account.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#create-aws-organization" class="table-of-contents__link toc-highlight">Create AWS Organization</a></li><li><a href="#get-master-account-role-arn" class="table-of-contents__link toc-highlight">Get Master Account Role ARN</a><ul><li><a href="#create-aws-account" class="table-of-contents__link toc-highlight">Create AWS Account</a></li></ul></li><li><a href="#add-external-aws-account" class="table-of-contents__link toc-highlight">Add External AWS Account</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/service-workbench-on-aws-cn/assets/js/runtime~main.ce72e352.js"></script>
<script src="/service-workbench-on-aws-cn/assets/js/main.ca450158.js"></script>
</body>
</html>