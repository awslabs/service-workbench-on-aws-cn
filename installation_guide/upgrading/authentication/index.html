<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<title data-react-helmet="true">Upgrading deprecated internal authentication | Service Workbench Platform</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://your-docusaurus-test-site.com/service-workbench-on-aws-cn/installation_guide/upgrading/authentication"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Upgrading deprecated internal authentication | Service Workbench Platform"><meta data-react-helmet="true" name="description" content="In the Service Workbench version 5.0.0, internal authentication has been deprecated. To upgrade to this version from your current version of Service Workbench, the administrators need to prepare the environment for an upgrade by deactivating, terminating, or disassociating internal users and the resources to which they are associated. The following tasks must be completed to prepare the Service Workbench environment for an upgrade:"><meta data-react-helmet="true" property="og:description" content="In the Service Workbench version 5.0.0, internal authentication has been deprecated. To upgrade to this version from your current version of Service Workbench, the administrators need to prepare the environment for an upgrade by deactivating, terminating, or disassociating internal users and the resources to which they are associated. The following tasks must be completed to prepare the Service Workbench environment for an upgrade:"><link data-react-helmet="true" rel="shortcut icon" href="/service-workbench-on-aws-cn/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://your-docusaurus-test-site.com/service-workbench-on-aws-cn/installation_guide/upgrading/authentication"><link data-react-helmet="true" rel="alternate" href="https://your-docusaurus-test-site.com/service-workbench-on-aws-cn/installation_guide/upgrading/authentication" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://your-docusaurus-test-site.com/service-workbench-on-aws-cn/installation_guide/upgrading/authentication" hreflang="x-default"><link rel="stylesheet" href="/service-workbench-on-aws-cn/assets/css/styles.d97de6cb.css">
<link rel="preload" href="/service-workbench-on-aws-cn/assets/js/runtime~main.4cbe2071.js" as="script">
<link rel="preload" href="/service-workbench-on-aws-cn/assets/js/main.e8ff6809.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/service-workbench-on-aws-cn/"><b class="navbar__title">Home</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">English</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">ServiceWorkBench</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Service Workbench Installation Guide</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/service-workbench-on-aws-cn/installation_guide/overview">Service Workbench overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/service-workbench-on-aws-cn/installation_guide/architecture">Service Workbench architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/service-workbench-on-aws-cn/installation_guide/components">Installation components</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Pre-installation requirements</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Installing Service Workbench</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Upgrading Service Workbench</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/service-workbench-on-aws-cn/installation_guide/upgrading/commandline">Upgrade process for command line installations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/service-workbench-on-aws-cn/installation_guide/upgrading/solutions">Upgrading AWS solution installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/service-workbench-on-aws-cn/installation_guide/upgrading/authentication">Upgrading to deprecated internal authentication</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/service-workbench-on-aws-cn/installation_guide/postupgrade">Post upgrade</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/service-workbench-on-aws-cn/installation_guide/uninstall">Uninstalling Service Workbench</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/service-workbench-on-aws-cn/installation_guide/troubleshooting">Troubleshooting</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Service Workbench Configuration Guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Deployment Guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Service Workbench Configuration Guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Service Workbench Post Deployment Guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Service Workbench User Guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Best Practices</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Development Guide</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">ä¸­æ–‡</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">åŠ¨æ‰‹å®žè·µ</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Upgrading deprecated internal authentication</h1></header><p>In the Service Workbench version 5.0.0, internal authentication has been deprecated. To upgrade to this version from your current version of Service Workbench, the administrators need to prepare the environment for an upgrade by deactivating, terminating, or disassociating internal users and the resources to which they are associated. The following tasks must be completed to prepare the Service Workbench environment for an upgrade:</p><ul><li>Workspaces created by internal authentication users must be terminated.  </li><li>SSH keys generated by internal authentication users must be deactivated or deleted.</li><li>Internal authentication users cannot be associated to any projects.</li><li>Internal authentication users cannot be associated to any organizational studies.</li><li>Internal authentication users (including the root user) must be deactivated or deleted.</li></ul><p>To allow administrators to revert to the Service Workbench version when internal authentication was supported, we recommend deactivating instead of deleting the resources.</p><p>If you havenâ€™t created IdP/native Cognito users before deploying version 5.0.0, you can re-deploy the previous release to create them, and then retry deploying version 5.0.0.</p><p><strong>Important</strong>: Follow these instructions in this order to avoid resources being removed before they should have been. Some resources depend on others being active to allow for the deactivation.</p><p>You may be required to use the Service Workbench API library to complete this process. You can either do this by using <a href="https://www.postman.com/" target="_blank" rel="noopener noreferrer">Postman</a> (an external software that can either be used as a web version or download to your desktop), or the command line package <a href="https://curl.se/" target="_blank" rel="noopener noreferrer">cURL</a>. For instructions on how to set up your Postman environment, see <a href="#setpostman">Setting up Postman for Service Workbench</a>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="terminating-workspaces">Terminating workspaces<a aria-hidden="true" class="hash-link" href="#terminating-workspaces" title="Direct link to heading">â€‹</a></h2><ol><li>Log in to Service Workbench as an administrator using either the internal or external authentication administratorâ€™s account.</li><li>Terminate workspaces: Go to the Workspaces page and terminate all active workspaces owned by internal users.</li></ol><h2 class="anchor anchorWithStickyNavbar_y2LR" id="deactivatingdeleting-ssh-keys">Deactivating/deleting SSH keys<a aria-hidden="true" class="hash-link" href="#deactivatingdeleting-ssh-keys" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="using-service-workbench-ui-to-delete-ssh-keys">Using Service Workbench UI to delete SSH keys<a aria-hidden="true" class="hash-link" href="#using-service-workbench-ui-to-delete-ssh-keys" title="Direct link to heading">â€‹</a></h3><p>Using the Service Workbench UI, you can only see your own SSH keys and can only delete the SSH keys. One option is to have all of your users log in before deployment and delete all of their SSH keys. Alternatively, if you attempt to deploy the latest version of Service Workbench, the output of the failed upgrade should list the SSH key IDs you need to deactivate. An administrator can deactivate another userâ€™s SSH key using the <code>{{baseURL}}/api/key-pairs/:keyPairId/deactivate</code> API. Repeat whichever process you choose for each SSH key that needs to be deactivated.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="using-postman-to-deactivate-ssh-keys">Using Postman to deactivate SSH keys<a aria-hidden="true" class="hash-link" href="#using-postman-to-deactivate-ssh-keys" title="Direct link to heading">â€‹</a></h3><p>When using Postman, make sure you have a valid token in your environment variable (for instructions to get this token, see <a href="#token">Getting authentication token</a>. </p><ol><li>In the Collections or APIs section, navigate to the <code>service-workbench-on-aws/api/key-pairs/{key Pair Id}</code> API.</li><li>Choose <strong>PUT Deactivate key pair</strong>. </li><li>In the <strong>Params</strong> section, paste the SSH key Id from the output of the failed deployment in the path variable for keyPairId.</li><li>Choose <strong>Send</strong>.</li></ol><img src="/service-workbench-on-aws-cn/img/deployment/installation/deactivate_ssh_key.png"><h3 class="anchor anchorWithStickyNavbar_y2LR" id="using-command-line-to-deactivate-ssh-keys">Using command line to deactivate SSH keys<a aria-hidden="true" class="hash-link" href="#using-command-line-to-deactivate-ssh-keys" title="Direct link to heading">â€‹</a></h3><p>When using command line, make sure you have a valid token. For more information on how to get this token, see <a href="#token">Getting authentication token</a>. In your terminal, paste and substitute the following:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location --request PUT &#x27;http://{{baseURL}}/api/key-pairs/{{keyPairId}}/deactivate&#x27; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--header &#x27;Content-Type: application/json&#x27; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--header &#x27;Authorization: Bearer {{token}}&#x27; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--data-raw &#x27;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> &quot;rev&quot;: 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="disassociating-projects">Disassociating projects<a aria-hidden="true" class="hash-link" href="#disassociating-projects" title="Direct link to heading">â€‹</a></h2><ol><li>Within the Service Workbench UI, go to the Users page and choose the Users tab. </li><li>For any user that the identity prover is internal, if the Project column has a value other than none, choose <strong>Detail</strong>.</li><li>Choose <strong>Edit</strong>.</li><li>Choose <strong>X</strong> next to any values in the <strong>Project</strong> field. </li><li>Choose <strong>Save</strong> and repeat for all internal authentication users. </li></ol><h2 class="anchor anchorWithStickyNavbar_y2LR" id="disassociating-organization-studies">Disassociating organization studies<a aria-hidden="true" class="hash-link" href="#disassociating-organization-studies" title="Direct link to heading">â€‹</a></h2><p>Using Service Workbench UI to disassociate organization studies
If you attempt to deploy the newest version of Service Workbench, the output of the failed upgrade should list the organization studies and their administrators you need to disassociate with internal authentication users. A Service Workbench administrator user can change permissions on any organization study using the <code>{{baseURL}}/api/studies/:studyId/permissions</code> API. Repeat whichever process you choose for each organization study that needs to have permissions edited. You can combine removing multiple users from the same organization study but can only edit one study per request.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="using-postman-to-disassociate-organization-study">Using Postman to disassociate organization study<a aria-hidden="true" class="hash-link" href="#using-postman-to-disassociate-organization-study" title="Direct link to heading">â€‹</a></h3><p>When using Postman, make sure you have a valid token in your environment variable. For more information on how to get this token, see <a href="#token">Getting authentication token</a>. </p><ol><li>In the Collections or APIs section, navigate to the <code>service-workbench-on-aws/api/studies/{study Id}/permissions</code> API. </li><li>Choose <strong>PUT update study permissions</strong>. </li><li>In the <strong>Params</strong> section, paste an organization studyId from the output of the failed deployment in the path variable for studyId. </li><li>In the <strong>Body</strong> section, add the user Ids of the users you want to add and to remove and their respective permission levels. </li><li>Choose <strong>Send</strong>.</li></ol><img src="/service-workbench-on-aws-cn/img/deployment/installation/diss_org_study.png"><img src="/service-workbench-on-aws-cn/img/deployment/installation/diss_org_study1.png"><h3 class="anchor anchorWithStickyNavbar_y2LR" id="using-command-line-to-disassociate-organization-study">Using command line to disassociate organization study<a aria-hidden="true" class="hash-link" href="#using-command-line-to-disassociate-organization-study" title="Direct link to heading">â€‹</a></h3><p>When using command line, make sure you have a valid token. For more information on how to get this token, see <a href="#token">Getting authentication token</a>. In your terminal, paste and substitute the following:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location --request PUT &#x27;http://{{baseURL}}/api/studies/{{study-id}}/permissions&#x27; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--header &#x27;Content-Type: application/json&#x27; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--header &#x27;Authorization: Bearer {{token}}&#x27; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--data-raw &#x27;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> &quot;usersToAdd&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> &quot;uid&quot;: &quot;u-HJtc1fiQnF5XNmrIu6KLU&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> &quot;permissionLevel&quot;: &quot;admin&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> &quot;usersToRemove&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> &quot;uid&quot;: &quot;u-ebgwibnfdbv57uyeuygrf8&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> &quot;permissionLevel&quot;: &quot;readonly&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Before you proceed to the last step, try to deploy to upgrade to the newest version of Service Workbench. If any checks besides the check for internal authentication users do not pass, remedy that by repeating the respective step above before proceeding in this document.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="deactivating-internal-authentication-users">Deactivating internal authentication users<a aria-hidden="true" class="hash-link" href="#deactivating-internal-authentication-users" title="Direct link to heading">â€‹</a></h2><p>This is the last step. To deactivate internal authentication users: </p><ol><li>On the Service Workbench UI, go to the <strong>Users</strong> page.   </li><li>For each internal user, choose <strong>Detail</strong>.   </li><li>Choose <strong>Deactivate User</strong>. Only the root user can deactivate itself. You must have Service Workbench version 4.2.0 or later deployed to deactivate the root user as itself. Deactivate the root user after at least one external authentication user has been created.   </li><li>To deactivate the root user, log in to the Service Workbench UI as the internal authentication root user.   </li><li>Choose <strong>Detail</strong>.   </li><li>Choose <strong>Deactivate user</strong>. You immediately lose access to the UI if you are logged into the user account you just deactivated.   </li></ol><p>After completing all of those steps, you are now ready to deploy and see if you pass all of the checks. If a check does not pass, check the output on the command line and repeat the step to deactivate/terminate/disassociate the listed resource. Check the CloudWatch log for predeployment in the main account for more information. There should be additional logging there to help debug. </p><p><strong>Important</strong>: After the upgrade to Service Workbench 5.0.0, My Studies owned by internal users would need to be transferred over to external IdP/Cognito native users. Service Workbench administrator must migrate these My Studies to the respective external authentication users after deployment. Administrators are responsible for completing this migration. This can be done by utilizing an API tool of choice. For instructions on how to complete this migration, see <a href="#migrating">Migrating My Study resources</a>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="setting-up-postman-for-service-workbench">Setting up Postman for Service Workbench<a aria-hidden="true" class="hash-link" href="#setting-up-postman-for-service-workbench" title="Direct link to heading">â€‹</a></h2><ol><li>Download <a href="https://www.postman.com/" target="_blank" rel="noopener noreferrer">Postman</a>.   <a name="setpostman"></a></li><li>After opening Postman, either sign in, create a free account, or continue to app without signing in (there should be an option for this at the bottom).    </li><li>On the navigation pane, choose <strong>Import</strong>.    </li><li>Import <code>openapi.yml</code> from the Service Workbench repository. This imports the APIs as a collection if you are not logged in.      </li><li>Choose the <strong>Environment quick look</strong> icon.  </li></ol><img src="/service-workbench-on-aws-cn/img/deployment/installation/setting_postman1.png"><ol start="6"><li>In the <strong>Environment</strong> section, either choose <strong>Add</strong> (if you do not have an environment yet set for the Service Workbench environment you need to edit) or select the environment that corresponds to the Service Workbench environment you are preparing for upgrade. It will appear as:   </li></ol><img src="/service-workbench-on-aws-cn/img/deployment/installation/setting_postman2.png"><img src="/service-workbench-on-aws-cn/img/deployment/installation/setting_postman3.png"><ol start="7"><li>If you are adding a new environment, you will need to add two new variables.<ul><li>Create a <code>baseUrl</code> variable. The value should be the API endpoint for the Service Workbench environment. This can be found in the information displayed after deployed the environment or after running <code>scripts/get-info.sh &lt;stage&gt;</code> in your <code>service-workbench-on-aws</code> repository folder: <div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">:::service-workbench-on-aws % scripts/get-info.sh stage   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">STAGE supplied as command line argument: stage   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-------------------------------------------------------------------------  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Summary:   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-------------------------------------------------------------------------   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Env Name  :stage   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Solution  : sw    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Website URL : https://------------.cloudfront.net</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">API Endpoint  : https://----------.execute-api.us-east-1.amazonaws.com/  stage</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">...    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-------------------------------------------------------------------------</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li>Create a token variable. For more information on how to set this value, see <a href="#token">Getting authentication token</a>. Save these values and set this environment as active by choosing the three dots at the top of the panel and then choosing <strong>Set as active environment</strong>. Now, when you choose the <strong>Environment quick look</strong> icon, you should see the information you just added. If you are using an existing environment, navigate to that environment from the dropdown that displays your current active environment.     <ul><li>Choose the desired environment.        </li><li>Set this environment as active by choosing the three dots at the top of the panel and then choosing <strong>Set as active environment</strong>.   </li></ul></li></ul></li><li>Now, when you choose the <strong>Environment quick look</strong> icon, you should be able to view the environmentâ€™s information.   </li><li>If you have not set it up yet (only in the case of existing environments) navigate to the <strong>Authorization</strong> tab for the <code>service-workbench-on-aws</code> collection or API.   </li><li>For <strong>Type</strong> drop-down, choose <strong>Bearer Token</strong>.    </li><li>For <strong>Token</strong>, enter <code>{{token}}</code>.   </li><li>Save this configuration.    </li></ol><h2 class="anchor anchorWithStickyNavbar_y2LR" id="getting-authentication-token">Getting authentication token<a aria-hidden="true" class="hash-link" href="#getting-authentication-token" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="using-service-workbench-ui">Using Service Workbench UI<a aria-hidden="true" class="hash-link" href="#using-service-workbench-ui" title="Direct link to heading">â€‹</a></h3><ol><li>Log in to Service Workbench on your web browser. <a name="token"></a></li><li>Right click and inspect the page to display the developer console. </li><li>Navigate to the <strong>Network</strong> tab. </li><li>Choose another page within the Service Workbench UI. </li><li>You should see items populate in the <strong>Name</strong> column. </li><li>Choose one of them and then choose the <strong>Headers</strong> tab. </li><li>In the <strong>Request Headers</strong> section, there should be an authorization property</li><li>Copy that value. This is your authentication token.</li></ol><img src="/service-workbench-on-aws-cn/img/deployment/installation/setting_postman4.png"><h2 class="anchor anchorWithStickyNavbar_y2LR" id="migrating-my-study-resources">Migrating My Study resources<a aria-hidden="true" class="hash-link" href="#migrating-my-study-resources" title="Direct link to heading">â€‹</a></h2><p>We will be using API calls to migrate My Study resources.<a name="migrating"></a></p><ol><li>If you do not know which My Study resources you need to migrate, first use the <code>{{baseUrl}}/api/migrate/my-studies GET</code> API. When using Postman, make sure you have a valid token in your environment variable. For more information on how to get this token, see <a href="#token">Getting authentication token</a>.     <ul><li>In the Collections or APIs section, navigate to the <code>service-workbench-on-aws/api/migrate/my-studies</code> API.    </li><li>Choose <strong>GET list My Study(s)</strong> in environment.     </li><li>Choose <strong>Send</strong>. The response will either be an empty list or a list of My Study Ids and current owner user IDs. In the former case, nothing more is needed to be done in this section as no migration of My Study resources is needed.   </li><li>For command line, make sure you have a valid token. For more information on how to get this token, see <a href="#token">Getting authentication token</a>. In your terminal paste and substitute the following:<div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  curl --location --request GET &#x27;https://{{baseUrl}}/api/migrate/my-studies&#x27; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --header &#x27;Authorization: Bearer {{token}}&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ```       </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ul></li><li>If you have My Study resources to migrate, you can make one API call to the <code>{{baseUrl}}/api/migrate/my-studies PUT</code> API. You need to have the list of study IDs you wish to migrate and the non-internal authentication user IDs to whom you wish to migrate the ownership.</li></ol><ul><li>For Postman, make sure you have a valid token in your environment variable For more information on how to get this token, see <a href="#token">Getting authentication token</a>.       </li><li>In the Collections or APIs section, navigate to the <code>service-workbench-on-aws/api/migrate/my-studies</code> API.    </li><li>Choose <strong>PUT migrate My Study(s) to new user(s)</strong>.           </li><li>In the body section, create objects with studyId and uid values.    </li><li>Choose <strong>Send</strong>.</li></ul><img src="/service-workbench-on-aws-cn/img/deployment/installation/migrating_my_studies.png"><p>For command line, make sure you have a valid token. For more information on how to get this token, see <a href="#token">Getting authentication token</a>. In your terminal paste and substitute the following:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --location --request PUT &#x27;https://{{baseUrl}}/api/migrate/my-studies&#x27; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--header &#x27;Content-Type: application/json&#x27; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--header &#x27;Authorization: Bearer {{token}}&#x27; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--data-raw &#x27;[</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> &quot;studyId&quot;: &quot;test_study_id&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> &quot;uid&quot;: &quot;u-C-l14OuIfNk7vL7AqmjvC&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> &quot;studyId&quot;: &quot;test_study_id&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> &quot;uid&quot;: &quot;u-C-l14OuIfNk7vL7AqmjvC&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">]&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You can verify that all My Study resources are migrated by repeating step 1.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/awslabs/go-research-on-aws/website/docs/installation_guide/upgrading/authentication.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/service-workbench-on-aws-cn/installation_guide/upgrading/solutions"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Upgrading AWS solution installation</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/service-workbench-on-aws-cn/installation_guide/postupgrade"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Post upgrade<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#terminating-workspaces" class="table-of-contents__link toc-highlight">Terminating workspaces</a></li><li><a href="#deactivatingdeleting-ssh-keys" class="table-of-contents__link toc-highlight">Deactivating/deleting SSH keys</a><ul><li><a href="#using-service-workbench-ui-to-delete-ssh-keys" class="table-of-contents__link toc-highlight">Using Service Workbench UI to delete SSH keys</a></li><li><a href="#using-postman-to-deactivate-ssh-keys" class="table-of-contents__link toc-highlight">Using Postman to deactivate SSH keys</a></li><li><a href="#using-command-line-to-deactivate-ssh-keys" class="table-of-contents__link toc-highlight">Using command line to deactivate SSH keys</a></li></ul></li><li><a href="#disassociating-projects" class="table-of-contents__link toc-highlight">Disassociating projects</a></li><li><a href="#disassociating-organization-studies" class="table-of-contents__link toc-highlight">Disassociating organization studies</a><ul><li><a href="#using-postman-to-disassociate-organization-study" class="table-of-contents__link toc-highlight">Using Postman to disassociate organization study</a></li><li><a href="#using-command-line-to-disassociate-organization-study" class="table-of-contents__link toc-highlight">Using command line to disassociate organization study</a></li></ul></li><li><a href="#deactivating-internal-authentication-users" class="table-of-contents__link toc-highlight">Deactivating internal authentication users</a></li><li><a href="#setting-up-postman-for-service-workbench" class="table-of-contents__link toc-highlight">Setting up Postman for Service Workbench</a></li><li><a href="#getting-authentication-token" class="table-of-contents__link toc-highlight">Getting authentication token</a><ul><li><a href="#using-service-workbench-ui" class="table-of-contents__link toc-highlight">Using Service Workbench UI</a></li></ul></li><li><a href="#migrating-my-study-resources" class="table-of-contents__link toc-highlight">Migrating My Study resources</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/service-workbench-on-aws-cn/assets/js/runtime~main.4cbe2071.js"></script>
<script src="/service-workbench-on-aws-cn/assets/js/main.e8ff6809.js"></script>
</body>
</html>